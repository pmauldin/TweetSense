<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>

        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

        <title>Results - TweetSense</title>

        <link rel="icon" type="image/png" href="{{url_for('static', filename='icons/favicon-192x192.png')}}" sizes="192x192">
        <link rel="icon" type="image/png" href="{{url_for('static', filename='icons/favicon-160x160.png')}}" sizes="160x160">
        <link rel="icon" type="image/png" href="{{url_for('static', filename='icons/favicon-96x96.png')}}" sizes="96x96">
        <link rel="icon" type="image/png" href="{{url_for('static', filename='icons/favicon-16x16.png')}}" sizes="16x16">
        <link rel="icon" type="image/png" href="{{url_for('static', filename='icons/favicon-32x32.png')}}" sizes="32x32">
        <meta name="msapplication-TileColor" content="#da532c">
        <meta name="msapplication-TileImage" content="{{url_for('static', filename='icons/mstile-144x144.png')}}">
        <meta name="application-name" content="TweetSense">  

        <link href="{{ url_for('static', filename='css/normalize.min.css') }}" rel="stylesheet">
        <link href="{{ url_for('static', filename='css/main.css') }}" rel="stylesheet">
        <link href="{{ url_for('static', filename='css/navbars.css') }}" rel="stylesheet">
        <link href="{{ url_for('static', filename='css/cursor.css') }}" rel="stylesheet">
        <script src="http://code.jquery.com/jquery-2.1.1.min.js"></script>

            <!-- More Styles -->
    <link href="http://cleancanvas.herokuapp.com/css/bootstrap/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="http://cleancanvas.herokuapp.com/css/compiled/bootstrap-overrides.css" type="text/css" />
   <!--  <link rel="stylesheet" type="text/css" href="http://cleancanvas.herokuapp.com/css/compiled/theme.css" /> -->

    <link href='http://fonts.googleapis.com/css?family=Lato:300,400,700,900,300italic,400italic,700italic,900italic' rel='stylesheet' type='text/css' />

    <link rel="stylesheet" href="http://cleancanvas.herokuapp.com/css/compiled/index.css" type="text/css" media="screen" />    
    <link rel="stylesheet" type="text/css" href="http://cleancanvas.herokuapp.com/css/lib/animate.css" media="screen, projection" /> 

        <script src="{{url_for('static', filename='js/vendor/modernizr-2.6.2-respond-1.1.0.min.js')}}"></script>
         <!-- Import Google Line Chart -->
       <script type="text/javascript"
              src="https://www.google.com/jsapi?autoload={
                'modules':[{
                  'name':'visualization',
                  'version':'1',
                  'packages':['corechart']
                }]
              }"></script>
 

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <style>
        .heading{color:#C58917;}
        .ultimate-wrapper{background-color:#FDD017;}
        .bluecolor{width: inherit; background-color:#C1CFE8;}
        .darkblue{background-color:#1C68EB}
        .blurcolor{color:#588DE8; line-height: 1.5;}
        .lowertab{border:0; line-height: 1.5;}
        .upperborder{margin: 15px;
                      padding: 25px;
                      color: #C58917;
                        }
        .boldlygo{
            font-weight: bold;
        }
        p.boldlygo{
            font-size:30px;
            padding-bottom: 0;
        }
        li.boldlygo{
            padding-top: 0;
            padding-bottom: 0;
        }                
        /*.first-article{background-color:#966F33}*/
        @media screen and (max-width: 900px) {
                h1 {
                    line-height: 35px;
                }
            }
        @media screen and (max-width: 600px) {
                h1 {
                    font-size: 25px;
                }
            }    
        @media screen and (max-width: 700px) {
                title {
                    padding-left: 35px;
                }
            }
        @media screen and (max-width: 500px) {
                li,a {
                    padding: none;
                    border: none;
                    margin: none;
                }

                input[type="text"] 
                {
                    width: 200px;
                    border: 1px solid #CCC;
                }  
            }                            
        </style>
    </head>
    <body syle="padding-top: 45px;">
        <!--[if lt IE 7]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->

       <!--___________________NavBar Menu_____________________ -->
        <div class="navbar navbar-inverse navbar-fixed-top sticky" role="navigation">
        <div class="container">
            <div class="navbar-header">
            <button type="button" class="navbar-toggle pull-right" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a href="/" class="navbar-brand bluecolor"><strong>Tweetsense</strong></a>
            </div>

            <div class="collapse navbar-collapse navbar-ex1-collapse" role="navigation">
                <ul class="nav navbar-nav navbar-right">
                    <li class=""><a href="/" class="bluecolor">HOME</a></li>

                    <li><a href="/about" class="bluecolor">ABOUT US</a></li>
                    <li><a href="/hof" class="bluecolor">Hall of Fame</a></li>
                </ul>
            </div>
        </div>
    </div>

        <!-- ______________DISPLAY GRAPHS___________________ -->
    <div class="ultimate-wrapper"> 
      <CENTER>
              {% if data2 %}
              <script>
                second = true;
                // var companydata2 = [{{ data2 }}];
              </script>              
              <script>
              document.getElementById("para1").innerHTML = formatAMPM();
              function formatAMPM() {
              var d = new Date(),
                  minutes = d.getMinutes().toString().length == 1 ? '0'+d.getMinutes() : d.getMinutes(),
                  hours = d.getHours().toString().length == 1 ? '0'+d.getHours() : d.getHours(),
                  ampm = d.getHours() >= 12 ? 'pm' : 'am',
                  months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],
                  days = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];
              return days[d.getDay()]+' '+months[d.getMonth()]+' '+d.getDate()+' '+d.getFullYear()+' '+hours+':'+minutes+ampm;
              }</script>
              <div class="heading upperborder" style="text-align: center"><h1>{{ q }} VS {{ q2 }} as of</h1></div>
              <div id="para1"></div>
              <div class="chart" id="output_chart2" style="align: center; width: 900px; height: 500px;"></div> 
              {% elif data %}
              <div class="heading upperborder" style="text-align: center"><h1>{{ q }}</h1></div>
              <div class="chart" id='output_chart' style="align: center; width: 900px; height: 500px;"></div>                
              {% else %}
              <h3>Please supply at least one (1) search term.<h3>
              {% endif %}
      </CENTER>
 


    <div class="main-container" name="section1">
        <div class="main wrapper clearfix">

            <h1>Get a sense of anything tweeted in the last 7 days:</h1>
                <form action="" method="post" name="login">
                    {{ form.hidden_tag() }} 
               <div style="display:none;"><input id="csrf_token" name="csrf_token" type="hidden" value="1421521855##a1af18a55da3a2f50514a97306473557ba90b703"></div>         
                    <!-- <p> -->
                        <!-- Please enter your search query:<br> -->
                    <h4>Enter term to analyze: (e.g #MHacks) </h4><div id="redoID"></div>
                    {{ form.query(size=50) }}
                    <p>(Optional) Enter second term to compare against. </p><div id="redo2ID"></div>
                    {{ form.opQuery(size=50 )}}
                    <!-- </p> -->
                    <p>
                        <!-- <input id="query" name="query" size="80" type="text" value=""> -->
                        <input type="submit" value="Submit" class="btn hover">
                    </p>
               
            </div> <!-- #main -->
        </div> <!-- #main-container -->

         <div class="footer-container bluecolor"> 
            <footer class="wrapper">
                <h3><a href="https://www.facebook.com/tweetsense">Facebook Link</a></h3>
            </footer>
        </div>
</div>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
        <script>window.jQuery || document.write('EERRROOORR')</script>

        <script src="{{url_for('static', filename='js/main.js')}}"></script>

                  <script type="text/javascript">
    // $.get(URL,data,function(data,status,xhr),dataType)
    //$.get("http://feeling-tweety.herokuapp.com/",data,function(data,status,xhr),json)
  // Getting the company name, the day and the rating for that day
  //Also getting number of tweets that data was based on
  var companydata = {{ data }};

  
  // var second = false;
  // var second = !(data2 == null)
  // document.write(companyda;ta);
    // Format= ["Company Name","Date",Sentiment Rating, #of Tweets];
    //Assuming that I am getting an array of company data with the index differing with different day Data, but the company name is the same every time
 </script>
 {% if data2 %}
 <script>
  var companydata2={{ data2 }};
 </script>
 {% endif %}
</head>
    <script type="text/javascript">
      google.setOnLoadCallback(drawChart);
       var subdata =[];
    var timedata =[];
    var ratingdata =[];
    // var amountoftweets =[];
    
    for(i=0;i<=companydata.length-1;i++){
      subdata=companydata[i]; //subdata now takes the form of one element from the array companydata
      timedata.push(subdata[0]); //Inserts first element from companydata[i], which would be the time index
      ratingdata.push(subdata[1]); //Inserts second element from companydata[i], which would be the twitter sentiment rating
      // amountoftweets.push(subdata[2]); //Inserts third element from companydata, which would be the amount of tweets
    }
      function drawChart() {
        var startArray = [['Time', '{{ q }}']];
        // console.log("!!");
        // timedata[240] = 0.0 + " (today)";
        for(i=0;i<companydata.length;i++) {
            startArray.push([timedata[i], ratingdata[i]]);
        }
  var data = google.visualization.arrayToDataTable(startArray);
     /* function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Time', 'Rating', '# of tweets'],
          ['January 12',  -22, 20],
          ['January 13',  -12, 30],
          ['January 14',  4, 40],
          ['January 15',  -5, 50],
          ['January 16',  31, 60],
          ['January 17',  56, 60],
          ['January 18',  40, 40]
        ]);   */ 
        var options = {
          hAxis: {title: 'Days from Now'},
          vAxis: {title: 'Emotional Connotation'},
          curveType: 'function',
          legend: { position: 'bottom' }
        };
        var chart = new google.visualization.LineChart(document.getElementById('output_chart'));
        chart.draw(data, options);
      }
    </script>

    <script type="text/javascript">
      google.setOnLoadCallback(drawChart);
       var subdata2 =[];
       var subdata3 =[];
    var timedata2 =[];
    var ratingdata2 =[];
    var ratingdata3 =[];
    
    for(i=0;i<=companydata.length-1;i++){
      subdata2=companydata[i];
      subdata3=companydata2[i]; //subdata now takes the form of one element from the array companydata
      timedata2.push(subdata2[0]); //Inserts first element from companydata[i], which would be the time index
      ratingdata2.push(subdata2[1]);
      ratingdata3.push(subdata3[1]); 
    }
      function drawChart() {
        arr = [['Time', '{{ q }}', '{{ q2 }}']];
        // data.push([timedata2[0], ratingdata2[0], ratingdata3[0]]);
        for(i=0;i<timedata2.length-1;i++) {
          arr.push([timedata2[i], ratingdata2[i], ratingdata3[i]]);
        }
        var data = google.visualization.arrayToDataTable(arr);
        var options2 = {
          hAxis: {title: 'Days from Now'},
          vAxis: {title: 'Emotional Connotation'},
          curveType: 'function',
          legend: { position: 'bottom' }
        };
        var chart2 = new google.visualization.LineChart(document.getElementById('output_chart2'));
        chart2.draw(data, options2);
      }
    </script>

    <script>
      var redo = "{{ q1Invalid }}";
      var redoText = "";
      if(redo === "True") {
          redoText = "Not Enough Tweets about that query to perform meaningful analysis. Please try another."
      }
      var displayRedo = document.getElementById("redoID");
      displayRedo.innerHTML = redoText;
      displayRedo.style.color="#FF0000"

      var redo2 = "{{ q2Invalid }}";
      var redo2Text = "";
      if(redo2 === "True") {
          redo2Text = "Not Enough Tweets about that query to perform meaningful analysis. Please try another."
      }
      console.log("Redo2: " + redo2 + ", redo2Text: " + redo2Text);
      var display2Redo = document.getElementById("redo2ID");
      display2Redo.innerHTML = redo2Text;
      display2Redo.style.color="#FF0000"
    </script>

<!-- Google Analytics code -->
    <script>

                (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
            function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
            e=o.createElement(i);r=o.getElementsByTagName(i)[0];
            e.src='//www.google-analytics.com/analytics.js';
            r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
            ga('create','UA-58718413-1');ga('send','pageview');
            
    // (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    // (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    // m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    // })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    // ga('create', 'UA-58718413-1', 'auto');
    // ga('send', 'pageview');

  </script>
    </body>
</html>
